<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title><%= reports[0]?.pageTitle || "診断結果｜概要" %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/report.css" />
</head>
<body class="print-a4">
  <% reports.forEach(report => { %>
    <% const detailPages = report.detailPages || []; %>
    <% const guidancePageNumber = report.guidancePageNumber || (detailPages.length ? detailPages[detailPages.length - 1].pageNumber + 1 : 2); %>
    <main class="sheet" id="<%= report.driverId %>-page-1 %>">
      <%- include('../partials/header/header_gaiyou', { report: report }) %>
      <%- include('../partials/body/body_gaiyou', { report: report }) %>
    </main>
    <% detailPages.forEach(function(pageEntry) { %>
      <main class="sheet sheet--break" id="<%= report.driverId %>-page-<%= pageEntry.pageNumber %>">
        <%- include('../partials/header/header_detail', { report: report, section: pageEntry.section, pageIndex: pageEntry.index, totalPages: pageEntry.totalPages }) %>
        <%- include('../partials/body/body_detail', { report: report, section: pageEntry.section, page: pageEntry.page, pageIndex: pageEntry.index, totalPages: pageEntry.totalPages }) %>
      </main>
    <% }) %>

    <main class="sheet sheet--break" id="<%= report.driverId %>-page-<%= guidancePageNumber %>">
      <%- include('../partials/header/header_sidou', { report: report }) %>
      <%- include('../partials/body/body_sidou', { report: report }) %>
    </main>

  <% }) %>
</body>
</html>
